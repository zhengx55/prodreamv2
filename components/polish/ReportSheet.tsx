'use client';
const TEST = {
  data: {
    score: 'Fair',
    detail: [
      {
        level: 'Fair',
        comment: {
          evaluation:
            'Your beginning starts with a clear statement of your goal, which is to expand your company and help more Chinese students study in the UK. This is a commendable objective and it provides a clear direction for your text. However, it lacks an engaging hook to immediately draw the reader in. The beginning could be more attractive if it started with a vivid scene, resonant memory, or impactful anecdote related to your experience in the field or your motivation for pursuing this goal. The connection between your initial narrative thread and its ongoing significance is somewhat explicit, but could be made more so.',
          suggestion:
            '<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Start with a compelling anecdote or vivid scene</span> that relates to your goal or your experience in the field.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Use more descriptive language</span> to paint a picture in the reader\'s mind and make your beginning more engaging.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Make the connection between your initial narrative thread and its ongoing significance more explicit</span>. This can be done by clearly stating how your past experiences have shaped your current goals and future plans.',
          example:
            'Instead of starting with <span style="font-weight: 800;font-style: italic;">"My goal is to expand my company and help more Chinese students come to study in the UK"</span>, you could start with a vivid scene or anecdote. For example, <span style="font-weight: 800;font-style: italic;">"I still remember the day when I first helped a Chinese student get admitted to a UK university. The joy in his eyes and the gratitude of his parents made me realize the impact I could have. That\'s when I decided to dedicate my career to helping more Chinese students study in the UK."</span> Then, you can continue with your current beginning, but add more descriptive language and make the connection between your past experiences and future goals more explicit. For instance, <span style="font-weight: 800;font-style: italic;">"This experience, along with others, has shaped my goal to expand my company and help more Chinese students come to the UK for their studies. Although I have gained extensive experience in this field, I recognize that there is still much more for me to learn..."</span>',
        },
        title: 'Attractiveness of the Beginning',
      },
      {
        level: 'Good',
        comment: {
          evaluation:
            'In terms of expressiveness, your text is <span style="color:#9C2CF3">clear and active</span>, with a <span style="color:#9C2CF3">strong overall theme</span>. You have effectively communicated your goals and the reasons behind your decision to pursue an MBA program. The text successfully conveys your <span style="color:#9C2CF3">determination to learn</span> and <span style="color:#9C2CF3">expand your business</span>. However, there are instances where the text could benefit from <span style="color:#9C2CF3">more specific details</span> and <span style="color:#9C2CF3">varied sentence structures</span>.',
          suggestion:
            '<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Avoid generic expressions</span>: Try to replace generic phrases with more specific and personalized ones.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Vary sentence length and structure</span>: Mixing long and short sentences can make your text more dynamic and engaging.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Use active voice</span>: Make sure to use active voice to make your statements more direct and powerful.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Add more personal insights</span>: Include more of your personal experiences or reflections to make the text more expressive and relatable.',
          example:
            'For instance, instead of saying <span style="font-weight: 800;font-style: italic;">"I recognize that there is still much more for me to learn"</span>, you could say <span style="font-weight: 800;font-style: italic;">"I am eager to delve deeper into the intricacies of business management, as I believe there are layers of knowledge yet to be uncovered"</span>. This not only makes your statement more specific, but also more expressive and engaging. \n\nInstead of <span style="font-weight: 800;font-style: italic;">"The MBA program at the University of Cambridge is the perfect fit for me"</span>, you could say <span style="font-weight: 800;font-style: italic;">"The University of Cambridge\'s MBA program aligns seamlessly with my aspirations, offering a blend of academic rigor and practical insights that I believe will catalyze my career progression"</span>. This adds more personal insight and makes your text more expressive.',
        },
        title: 'Expressiveness',
      },
      {
        level: 'Good',
        comment: {
          evaluation:
            'Your statement does a good job of outlining your goals and why you believe the MBA program at the University of Cambridge will help you achieve them. However, it lacks a certain level of <span style="color:#9C2CF3">authenticity and uniqueness</span>. While your career aspirations are clear, the text doesn\'t fully convey your individual voice and personality. The statement is somewhat formulaic, and it doesn\'t set you apart from other candidates who may also be applying for the same program.',
          suggestion:
            '<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Personalize your statement</span>: Share more about your personal experiences and how they have shaped your goals. This will help to convey your individual voice and personality.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Avoid clichés</span>: Phrases like <span style="font-weight: 800;font-style: italic;">"take my career to the next level"</span> are commonly used and don\'t add to the uniqueness of your statement. Try to find more original ways to express your aspirations.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Highlight your unique perspective</span>: As a business owner who has already gained extensive experience in your field, you have a unique perspective to offer. Make sure this comes across in your statement.',
          example:
            'Instead of just stating that you want to <span style="font-weight: 800;font-style: italic;">"expand your company and help more Chinese students come to study in the UK"</span>, you could share a specific story or incident that inspired this goal. For example, you might talk about a particular student you helped and how that experience made you realize the need for better support systems for international students. This would not only make your statement more <span style="color:#9C2CF3">authentic</span>, but it would also highlight your <span style="color:#9C2CF3">unique perspective</span> as someone who has firsthand experience in this field. Similarly, instead of using the clichéd phrase <span style="font-weight: 800;font-style: italic;">"take my career to the next level"</span>, you could say something like <span style="font-weight: 800;font-style: italic;">"deepen my understanding of business management to better serve my clients and contribute to the field"</span>. This would convey the same idea, but in a more original and personal way.',
        },
        title: 'Authenticity and Uniqueness',
      },
      {
        level: 'Fair',
        comment: {
          evaluation:
            'Your text reflects a <span style="color:#9C2CF3">determined and goal-oriented personality</span>. You have clearly outlined your goals and the steps you plan to take to achieve them. This shows a strong sense of <span style="color:#9C2CF3">self-awareness</span> and <span style="color:#9C2CF3">strategic thinking</span>, which are valuable traits in any academic setting. However, while your text does provide a glimpse into your personality, it tends to be more focused on your professional aspirations rather than your personal traits. This could potentially limit the depth of understanding about your personality. <span style="color:#9C2CF3">Different schools value different personalities. Here you showed determination, goal-orientation, self-awareness, and strategic thinking. I suggest checking the official website of the school you are applying to see what kind of personality they expect to see.</span>',
          suggestion:
            '<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Highlight more personal traits</span>: While your professional aspirations are important, universities also want to know who you are as a person. Try to incorporate more personal traits into your text.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Use a personal story or anecdote</span>: This can help to provide a more vivid and compelling illustration of your personality.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Reflect on your experiences</span>: Discussing how your experiences have shaped your personality can provide a deeper understanding of who you are.',
          example:
            'To better reflect your personality, you could consider sharing a <span style="color:#9C2CF3">personal story or anecdote</span> that highlights your determination and strategic thinking. For instance, you could talk about a time when you faced a significant challenge in your current business and how you strategically overcame it. This would not only show your problem-solving skills but also give a glimpse into your resilience and adaptability. \n\nIn addition, reflecting on your experiences can provide a deeper understanding of your personality. You could discuss how your experiences in running your business have shaped your personality, perhaps making you more resilient, adaptable, or empathetic. For example, you could talk about how dealing with different clients and their unique needs has made you more patient and understanding.',
        },
        title: 'Fit',
      },
      {
        level: 'Good',
        comment: {
          evaluation:
            "Your essay does a good job of articulating your goals and motivations for pursuing an MBA program at the University of Cambridge. You have clearly stated your current situation and the gap in your knowledge that you wish to fill through further education. Your essay also demonstrates a clear connection between your past experiences and your future aspirations. However, the narrative could benefit from a more engaging point of tension. While you've mentioned your lack of management experience, it's not explored in depth. The essay also lacks a strong storytelling element, which could make your narrative more compelling and relatable. The connection between your past, present, and future could be more nuanced and subtly integrated into the narrative. Overall, the essay shows good coherence and cohesion, but there's room for improvement in terms of storytelling and depth.",
          suggestion:
            '**\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Introduce a stronger point of tension</span> that can serve as a compelling narrative thread throughout your essay.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Incorporate more storytelling elements</span> to make your narrative more engaging and relatable.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Deepen the connection</span> between your past, present, and future to create a more nuanced narrative.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Elaborate on your personal growth</span> and how it has shaped your decision to pursue further education.',
          example:
            'To introduce a stronger point of tension, you could delve deeper into a specific challenge or setback you faced in your business and how this highlighted your need for further education. For example, you might have faced a situation where your lack of management skills led to a significant problem in your company. This could serve as a compelling point of tension that drives your narrative. \n\nTo incorporate more storytelling elements, you could share specific anecdotes or experiences from your past that have led you to your current situation. For instance, you could talk about a particular incident that made you realize your lack of management skills and how it affected your business. \n\nTo deepen the connection between your past, present, and future, you could discuss how your past experiences have shaped your current goals and how pursuing an MBA at the University of Cambridge will help you achieve these goals. For example, you could discuss how your experiences as a first-generation Chinese student in the UK inspired you to help other Chinese students study in the UK.\n\nTo elaborate on your personal growth, you could discuss how your experiences running your business have changed you as a person and how these changes have influenced your decision to pursue further education. For example, you could talk about how dealing with the challenges of running a business has made you more resilient and determined to succeed.',
        },
        title: 'Writing and Structure',
      },
      {
        level: 'Good',
        comment: {
          evaluation:
            'Your writing is generally clear and concise, with a strong sense of purpose and direction. However, there are minor issues with grammar that need to be addressed. For instance, the phrase <span style="font-weight: 800;font-style: italic;">"first generation"</span> should be hyphenated as <span style="font-weight: 800;font-style: italic;">"first-generation"</span> for grammatical accuracy. Additionally, the sentence <span style="font-weight: 800;font-style: italic;">"My goal is to expand my company and help more Chinese students come to study in the UK"</span> could be improved by adding a comma after <span style="font-weight: 800;font-style: italic;">"company"</span> to separate the two independent clauses. Overall, your writing is mostly free of unnecessary jargon, but there are a few areas where the grammar could be improved.',
          suggestion:
            '<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Always use hyphens</span> in compound adjectives like <span style="font-weight: 800;font-style: italic;">"first-generation"</span>.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Use commas</span> to separate independent clauses when they are joined by a coordinating conjunction.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Ensure subject-verb agreement</span> in your sentences.\n<span style="font-weight: 800;">·</span> <span style="color:#9C2CF3">Avoid run-on sentences</span> by breaking them up into smaller, more manageable sentences.',
          example:
            'For instance, the phrase <span style="font-weight: 800;font-style: italic;">"first generation"</span> should be written as <span style="font-weight: 800;font-style: italic;">"first-generation"</span> to ensure grammatical accuracy. In the sentence <span style="font-weight: 800;font-style: italic;">"My goal is to expand my company and help more Chinese students come to study in the UK"</span>, a comma should be added after <span style="font-weight: 800;font-style: italic;">"company"</span> to separate the two independent clauses. This would make the sentence read as <span style="font-weight: 800;font-style: italic;">"My goal is to expand my company, and help more Chinese students come to study in the UK"</span>. In terms of subject-verb agreement, ensure that your subjects and verbs match in number. For example, instead of writing <span style="font-weight: 800;font-style: italic;">"The university\'s location in one of Europe\'s most vibrant cities provides a great platform for networking and learning from other experienced professionals"</span>, you could write <span style="font-weight: 800;font-style: italic;">"The university\'s location in one of Europe\'s most vibrant cities provides a great platform for networking and learning from experienced professionals"</span>. This ensures that the subject <span style="font-weight: 800;font-style: italic;">"location"</span> agrees with the verb <span style="font-weight: 800;font-style: italic;">"provides"</span>.',
        },
        title: 'Grammar Accuracy',
      },
    ],
    head: "Hey, I am Max. It is my pleasure to read your essay. Your essay is very impressive. It's clear that you have a strong drive and passion for expanding your company and helping Chinese students. I admire your determination to further your education and gain the management experience necessary for success. The MBA program at the University of Cambridge sounds like the perfect opportunity for you to achieve your goals. I've already completed your evaluation. Below are the details. I'm confident you'll definitely gain admission to a great university.",
    id: '01fd8c775dc6485cae2ce357c8c329ce',
  },
};

const TEST_TITLE = [
  'Attractiveness of the Beginning',
  'Expressiveness',
  'Authenticity and Uniqueness',
  'Fit',
  'Writing and Structure',
  'Grammar Accuracy',
];

import { Sheet, SheetContent, SheetTrigger } from '@/components/ui/sheet';
import { memo, useCallback, useState } from 'react';
import { Button } from '../ui/button';
import Spacer from '../root/Spacer';
import Image from 'next/image';
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from '../ui/accordion';
import { Separator } from '../ui/separator';
import dynamic from 'next/dynamic';
import { AnimatePresence } from 'framer-motion';

const OptionsMenu = dynamic(() => import('./OptionsMenu'), { ssr: false });

const ReportSheet = () => {
  const [showOptions, setShowOptions] = useState(false);
  const toggleOptions = useCallback(() => {
    setShowOptions((prev) => !prev);
  }, []);
  return (
    <Sheet>
      {/* <SheetTrigger asChild> */}
      <AnimatePresence>
        {showOptions && (
          <OptionsMenu show={showOptions} toggleShow={toggleOptions} />
        )}
      </AnimatePresence>
      <div className='flex flex-col gap-y-4 rounded-xl bg-card p-4'>
        <Image
          alt='rated'
          src='/rated.png'
          className='self-center'
          width={54}
          height={54}
        />
        <Button
          onClick={() => setShowOptions((prev) => !prev)}
          variant={'white'}
          className='small-semibold justify-center'
        >
          Get Rated
        </Button>
      </div>
      {/* </SheetTrigger> */}
      <SheetContent className='flex flex-col overflow-y-auto px-4 py-6'>
        <div className='flex gap-x-4'>
          <div className='flex flex-col'>
            <h2 className='title-semibold'>
              Your overall essay score is&nbsp;
              <span className='text-primary-200'>A</span>
            </h2>
            <Spacer y='22' />
            <Button className='title-semibold self-start bg-card px-4'>
              Re-evaluate
            </Button>
          </div>
        </div>
        <Spacer y='24' />
        <div className='flex gap-x-2'>
          <div className='h-20 w-20 shrink-0 overflow-hidden rounded-full bg-blue-100 px-3 pt-2'>
            <Image
              alt='max'
              src='/max.png'
              width={1000}
              height={1000}
              className='h-auto w-full'
            />
          </div>
          <div className='flex flex-col gap-y-2 rounded-2xl bg-blue-50 px-4 py-2'>
            <h2 className='title-semibold text-primary-200'>Max</h2>
            <p className='small-regular'>{TEST.data.head}</p>
          </div>
        </div>
        <Spacer y='24' />
        <Accordion type='multiple'>
          {TEST.data.detail.map((item, index) => (
            <AccordionItem
              key={`report-acc${index}`}
              value={`report-acc${index}`}
            >
              <AccordionTrigger className='title-semibold px-4'>
                {TEST_TITLE[index]}:
              </AccordionTrigger>
              <Separator
                orientation='horizontal'
                className='ml-[2.5%] w-[95%] bg-shadow-border'
              />
              <AccordionContent className='border-l border-primary-200 bg-white px-4 pt-4 '>
                <article
                  dangerouslySetInnerHTML={{ __html: item.comment.evaluation }}
                />
                <Spacer y='24' />
                <h2 className='text-primary-200'>Improvement Suggestions</h2>
                <article
                  dangerouslySetInnerHTML={{ __html: item.comment.suggestion }}
                />
                <Spacer y='24' />
                <h2 className='text-primary-200'>Improvement Examples</h2>
                <article
                  dangerouslySetInnerHTML={{ __html: item.comment.example }}
                />
              </AccordionContent>
            </AccordionItem>
          ))}
        </Accordion>
        <Spacer y='24' />
        <div className='flex w-full justify-end'>
          <Button>Download Report</Button>
        </div>
        <Spacer y='64' />
        <div className='flex-center gap-x-6'>
          <Image
            className='h-[60px] w-[60px] cursor-pointer hover:opacity-50'
            src='/thumbUp.svg'
            width={60}
            height={60}
            alt='thumbup'
          />
          <Image
            className='w-[60px h-[60px] cursor-pointer hover:opacity-50'
            src='/thumbDown.svg'
            width={60}
            height={60}
            alt='thumbdown'
          />
        </div>
        <Spacer y='24' />
        <p className='base-regular text-center text-shadow-100'>
          How would you rate the overall quality of this report?
        </p>
      </SheetContent>
    </Sheet>
  );
};

export default memo(ReportSheet);
