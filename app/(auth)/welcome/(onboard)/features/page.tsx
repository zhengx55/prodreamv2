import Spacer from '@/components/root/Spacer';
import Options from '@/components/welcome/Options';
import dynamic from 'next/dynamic';
import { cookies } from 'next/headers';
import { redirect } from 'next/navigation';
import Image from 'next/image';

const AnimatedLayout = dynamic(
  () => import('@/components/welcome/AnimatedLayout'),
  { ssr: false }
);

export default async function Page() {
  const cookieStore = cookies();
  if (!cookieStore.get('token')) {
    redirect('/signup');
  }
  const token = cookieStore.get('token')?.value;
  const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}refresh`, {
    method: 'GET',
    headers: {
      Authorization: `Bearer ${token}`,
    },
  });
  const data = (await res.json()).data;

  return (
    <AnimatedLayout>
      <div className='relative bg-[#fff] rounded-[20px] w-full px-[200px] py-[100px]'>
        <div className='absolute right-[37px] top-[-100px] flex items-center gap-x-1'>
          <svg xmlns="http://www.w3.org/2000/svg" width="72" height="72" viewBox="0 0 72 72" fill="none">
            <path d="M36.0429 5.99707C19.474 5.99707 6.04297 19.4281 6.04297 35.997C6.04297 52.566 19.474 65.997 36.0429 65.997C51.2829 65.997 64.0749 54.573 65.8569 39.561C66.0489 37.914 64.8759 36.3811 63.2289 36.1831C61.5849 35.9911 60.0489 37.164 59.8569 38.811C58.4319 50.811 48.2349 59.997 36.0429 59.997C22.789 59.997 12.043 49.251 12.043 35.997C12.043 22.743 22.789 11.9971 36.0429 11.9971C38.8119 11.9971 41.5539 12.498 44.1069 13.404C45.6669 13.956 47.3019 13.089 47.8569 11.529C48.4089 9.96605 47.6349 8.2381 46.0749 7.6831C42.8829 6.5521 39.4959 5.99707 36.0429 5.99707ZM63.0429 11.9971C62.2749 11.9971 61.4709 12.2671 60.8859 12.8401L34.7289 38.622C33.9579 39.381 33.1809 39.234 32.5749 38.34L29.5749 33.9331C28.6569 32.5801 26.731 32.187 25.357 33.09C23.98 33.993 23.593 35.862 24.511 37.215L27.511 41.622C30.214 45.609 35.5029 46.137 38.9499 42.747L65.1999 17.061C66.3699 15.909 66.3699 13.9921 65.1999 12.8401C64.6149 12.2641 63.8109 11.9971 63.0429 11.9971Z" fill="#8551F3"/>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="3" viewBox="0 0 64 3" fill="none">
            <path d="M62.5 2.5C63.0523 2.5 63.5 2.05228 63.5 1.5C63.5 0.947715 63.0523 0.5 62.5 0.5V2.5ZM1.95312 2.5C2.50541 2.5 2.95312 2.05228 2.95312 1.5C2.95312 0.947715 2.50541 0.5 1.95312 0.5V2.5ZM5.85938 0.5C5.30709 0.5 4.85938 0.947715 4.85938 1.5C4.85938 2.05228 5.30709 2.5 5.85938 2.5V0.5ZM9.76562 2.5C10.3179 2.5 10.7656 2.05228 10.7656 1.5C10.7656 0.947715 10.3179 0.5 9.76562 0.5V2.5ZM13.6719 0.5C13.1196 0.5 12.6719 0.947715 12.6719 1.5C12.6719 2.05228 13.1196 2.5 13.6719 2.5V0.5ZM17.5781 2.5C18.1304 2.5 18.5781 2.05228 18.5781 1.5C18.5781 0.947715 18.1304 0.5 17.5781 0.5V2.5ZM21.4844 0.5C20.9321 0.5 20.4844 0.947715 20.4844 1.5C20.4844 2.05228 20.9321 2.5 21.4844 2.5V0.5ZM25.3906 2.5C25.9429 2.5 26.3906 2.05228 26.3906 1.5C26.3906 0.947715 25.9429 0.5 25.3906 0.5V2.5ZM29.2969 0.5C28.7446 0.5 28.2969 0.947715 28.2969 1.5C28.2969 2.05228 28.7446 2.5 29.2969 2.5V0.5ZM33.2031 2.5C33.7554 2.5 34.2031 2.05228 34.2031 1.5C34.2031 0.947715 33.7554 0.5 33.2031 0.5V2.5ZM37.1094 0.5C36.5571 0.5 36.1094 0.947715 36.1094 1.5C36.1094 2.05228 36.5571 2.5 37.1094 2.5V0.5ZM41.0156 2.5C41.5679 2.5 42.0156 2.05228 42.0156 1.5C42.0156 0.947715 41.5679 0.5 41.0156 0.5V2.5ZM44.9219 0.5C44.3696 0.5 43.9219 0.947715 43.9219 1.5C43.9219 2.05228 44.3696 2.5 44.9219 2.5V0.5ZM48.8281 2.5C49.3804 2.5 49.8281 2.05228 49.8281 1.5C49.8281 0.947715 49.3804 0.5 48.8281 0.5V2.5ZM52.7344 0.5C52.1821 0.5 51.7344 0.947715 51.7344 1.5C51.7344 2.05228 52.1821 2.5 52.7344 2.5V0.5ZM56.6406 2.5C57.1929 2.5 57.6406 2.05228 57.6406 1.5C57.6406 0.947715 57.1929 0.5 56.6406 0.5V2.5ZM60.5469 0.5C59.9946 0.5 59.5469 0.947715 59.5469 1.5C59.5469 2.05228 59.9946 2.5 60.5469 2.5V0.5ZM0 2.5H1.95312V0.5H0V2.5ZM5.85938 2.5H9.76562V0.5H5.85938V2.5ZM13.6719 2.5H17.5781V0.5H13.6719V2.5ZM21.4844 2.5H25.3906V0.5H21.4844V2.5ZM29.2969 2.5H33.2031V0.5H29.2969V2.5ZM37.1094 2.5H41.0156V0.5H37.1094V2.5ZM44.9219 2.5H48.8281V0.5H44.9219V2.5ZM52.7344 2.5H56.6406V0.5H52.7344V2.5ZM60.5469 2.5H62.5V0.5H60.5469V2.5Z" fill="#8551F3"/>
          </svg>
          <Image
            src='/welcome/Frame02.svg'
            alt='welcome'
            width={60}
            height={60}
            className='h-auto w-[60px]'
            priority
          />
        </div>
        <Options type='onboard' firstname={data.first_name} />
      </div>
    </AnimatedLayout>
  );
}
